---
layout: post
title: macOS 渗透测试环境
date: '2022-06-04 08:57:10'
tags:
- macos
- pentest
- hash-import-2023-03-22-16-36
---

### 0x00 系统相关设置

- 允许从任何来源安装 App  
   `sudo spctl --master-disable`  
  `# "系统偏好设置" -> "安全性与隐私" -> "通用" -> 点击右下角的解锁按钮，选择"允许从任何来源"`
- 安装 Xcode 命令行工具  
  `xcode-select --install`

### 0x01 环境相关软件

- [Homebrew](https://brew.sh)  
  Homebrew 是 macOS 缺失的包管理工具。  
  安装：  
  `/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`
- zsh 代码高亮插件  
  `brew install zsh-syntax-highlighting`
- Python 3  
  `brew install python3`
- Java 17（[微软 JDK17](https://docs.microsoft.com/en-us/java/openjdk/install)）  
   `# 安装`  
  `brew install --cask microsoft-openjdk # 安装最新版 Microsoft OpenJDK 17`  
  `# 卸载`  
  `sudo rm -rf /Library/Java/JavaVirtualMachines/microsoft-17.jdk`  
  `sudo pkgutil --forget com.microsoft.17.jdk`
- 优化 vim 配置（使用 [amix/vimrc](https://github.com/amix/vimrc)）  
   `git clone --depth=1 https://github.com/amix/vimrc.git ~/.vim_runtime`  
  `sh ~/.vim_runtime/install_awesome_vimrc.sh`
- 安装 Sublime Text 4 代码编辑器  
  `brew install --cask sublime-text`
- 免费解压缩软件 [The Unarchiver](https://apps.apple.com/us/app/the-unarchiver/id425424353?mt=12)
- 自带终端的替换软件 [iTerm2](https://iterm2.com)  
  `brew install --cask iterm2`
- [docker](https://www.docker.com) & docker-compose  
   `brew install docker`  
  `brew install docker-compose`

### 0x02 安全相关软件

- nmap - 端口扫描器  
  `brew install nmap`
- sqlmap - sql 注入辅助工具  
  `brew install sqlmap`
- masscan - 比 nmap 更快的端口扫描器  
  `brew install masscan`
- Metasploit - 渗透测试/漏洞验证/权限维持  
  `brew install --cask metasploit`
- Burp Suite - 渗透测试工具包

1. 正常下载安装 [burpsuite pro](https://portswigger.net/burp/releases/)

2. 将 `burploader.jar` 放在路径 `/Applications/Burp Suite Professional.app/Contents/java/app` 下

3. 修改 `/Applications/Burp Suite Professional.app/Contents/java/app/vmoptions.txt` 文件，添加：  
     &nbsp; &nbsp;`-noverify`  
    `-javaagent:burploader.jar`

4. 找到 burpsuite pro 的图标并打开：

<img src="assets/img/blog/imported/macos-pentest-env-setup-burpsutie-pro-icon-on-macos.png" class="kg-image" alt loading="lazy">

5. 打开激活工具， **激活** ：`java -jar "/Applications/Burp Suite Professional.app/Contents/java/app/burploader.jar"`6. 首次激活后，按步骤 4. 正常打开即可使用。

### 0x03 其他设置

- 管理多版本 JDK  
  使用 [jenv](https://github.com/jenv/jenv)：  
  `brew install jenv`
- 使用 github 上的工具如 [wafw00f](https://github.com/EnableSecurity/wafw00f)  
  按照项目 README 操作即可。

### 0x04 个人安装工具列表

- 系统工具
  - [Dash](https://kapeli.com/dash) API 文档查询工具
  - [SnippetsLab](https://www.renfei.org/snippets-lab/) 代码段管理工具
  - ClashX - github 加速
  - Gas Mask - hosts 管理工具
  - VMware Fusion - 虚拟机
- 安全工具
  - xapkd - 安卓 apk 文件信息查看工具
  - wireshark - 数据包分析
  - Charles - 网络调试工具
  - Paw - API 调试工具
  - Hex Fiend - 二进制文件查看工具
  - Hopper Disassembler - 反编译工具

_欢迎补充。_
